#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <arpa/inet.h>
#include <unistd.h>
#include <time.h>
#include <errno.h>

#include "list.h"

#define MAX(a, b)  a>b?a:b

int main (int argc, char *argv[]) {
    List *list = list_create();
    
    for (int i = 0; i < 0; i ++) {
        int *ss = (int *)malloc(sizeof(int));
        *ss = i+1;
        list_push(list, ss);
    }

    //     List_Node *head = list->first;
    //     List_Node *pos  = head;
    //     List_Node *n    = pos->next;

    //     while (pos != NULL) {
    //         printf("------- %d, %p\n", *(int *)pos->value, n);

    //         if (*(int *)pos->value % 2 == 0) {
    //             void *ss = list_remove(list, pos);
    //             free(ss);
    //         }

    //         if (n == NULL) {
    //             break;
    //         }

    //         pos = n;
    //         n = pos->next;
    //     }
    // }

    {
        LIST_FOREACH_SAFE(list, curr) {
            printf("------- %d\n", *(int *)curr->value);

            if (*(int *)curr->value % 2 == 0) {
                void *ss = list_remove(list, curr);
                free(ss);
            }

        }
    }

    LIST_FOREACH(list, first, next, cur) {
        //printf("************ %p\n", cur);
        //printf("************ count: %d\n", LIST_COUNT(session_list));
        if (cur->value) {
            printf("%d\n", *(int *)cur->value);
        } else {
            printf("偶数！\n");
        }
    }

}

    

